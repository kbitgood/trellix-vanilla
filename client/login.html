<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Log in to Trellix-Vanilla</title>
    <link href="/css/reset.css" rel="stylesheet" />
    <link href="/css/style.css" rel="stylesheet" />
  </head>
  <body>
    <div class="page-wrapper">
      <nav>
        <a class="logo" href="/" id="home-link">
          <div>Trellix-Vanilla</div>
          <div>a Stupid Demo</div>
        </a>
        <div class="links">
          <a href="https://github.com/kbitgood/trellix-vanilla">
            <img src="/img/github-mark-white.png" aria-hidden="true" />
            <span>Source</span>
          </a>
        </div>
        <div class="links" id="login-link">
          <a href="/login">
            <svg><use href="/img/icons.svg#login"></use></svg>
            <span>Log in</span>
          </a>
        </div>
        <script>
          const username = document.cookie
            .split(";")
            .map((c) => c.trim().split("="))
            .find((c) => c[0] === "username")?.[1];
          if (username) {
            document.querySelector("nav #login-link").innerHTML =
              '<a href="/logout">' +
              '<svg><use href="/img/icons.svg#logout"></use></svg>' +
              "<span>Log out</span></a>";
            document.querySelector("nav #home-link").href = "/home";
          }
        </script>
      </nav>
      <main class="login">
        <article>
          <h1 id="login-header">Log in</h1>
          <form id="login-form" method="post">
            <div>
              <label for="username">Username</label>
              <input
                id="username"
                name="username"
                aria-describedby="login-header"
                required=""
              />
            </div>
            <div>
              <label for="password">Password</label>
              <input
                id="password"
                name="password"
                type="password"
                autocomplete="current-password"
                aria-describedby="password-error"
                required=""
              />
            </div>
            <span class="form-error" style="display: none"></span>
            <button type="submit">Sign in</button>
            <div class="sub-submit">
              Don't have an account?
              <a href="/signup">Sign up</a>.
            </div>
          </form>
        </article>
      </main>
    </div>
    <script src="/js/login.js"></script>
  </body>
</html>
